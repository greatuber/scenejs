!function(){if(function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("Scenario",[],b):"object"==typeof exports?exports.Scenario=b():a.Scenario=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=3)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e={get:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=c+b;return a?function(){return this[a][d]}:function(){return this[d]}},set:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=c+b;return a?function(b){return this[a][d]=b,this}:function(a){return this[d]=a,this}}},f=(b.isUndefined=function(a){return void 0===a},b.isObject=function(a){return"object"===(void 0===a?"undefined":d(a))},b.isString=function(a){return"string"==typeof a},b.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.splitUnit=function(a){var b=""+a;try{var c=b.match(/([0-9]|\.|-|e-|e\+)+/g,"")[0],d=b.replace(c,"")||"";return c=parseFloat(c),{unit:d,value:c}}catch(a){return{unit:b}}},b.camelize=function(a){return a.replace(/[\s-_]([a-z])/g,function(a,b){return b.toUpperCase()})},b.defineProperty=function(a,b,c){Object.defineProperty(a,b,c)});b.defineGetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{get:e.get(d,c,g)})},b.defineSetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{set:e.set(d,c,g)})},b.defineGetterSetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{get:e.get(d,c,g),set:e.set(d,c,g)})}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(2),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=c(4),k=c(0),l=0,m=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){var b=Date.now(),c=Math.max(0,16-(b-l)),d=window.setTimeout(function(){a(b+c)},1e3/60);return l=b+c,d}}(),n=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._currentTime=0,c._timer=0,c.options={},c.iterationCount=1,c.delay=0,c.fillMode="forwards",c.direction="none",c.playState="paused",c.playSpeed=1,c._currentTime=0,c._currentIterationTime=-1,c._prevTime=0,c.setOptions(a),c}return f(b,a),g(b,[{key:"setOptions",value:function(a){if(!a)return this;var b=void 0;for(b in a)"timingFunction"!==b&&"timingFunctions"!==b?this.options[b]=a[b]:this[b]=a[b];return this}},{key:"play",value:function(){var a=this;return this.ended&&(this.currentTime=0),this.playState="running",m(function(b){a._prevTime=b,a.tick(b)}),this.trigger("play"),this}},{key:"pause",value:function(){return this.playState="paused",this.trigger("paused"),this}},{key:"stop",value:function(){return this.playState="paused",this.trigger("paused"),this.trigger("ended"),this}},{key:"reset",value:function(){return this.currentTime=0,this.stop(),this}},{key:"setTime",value:function(a){var b=this.totalDuration,c=a;c<0?c=0:c>b&&(c=b),this._currentTime=c,this.calculateIterationTime(),this.trigger("timeupdate",[c])}},{key:"calculateIterationTime",value:function(){var a=this._currentTime,b=this.duration,c=this.iterationCount,d=this.fillMode,e=this.direction,f=parseInt(1e4*Math.max(a-this.delay,0),10)/1e4,g=0===b?0:f/b,h=g%2>=1,i=f%b,j=!1;switch(e){case"reverse":i=b-i;break;case"alternate":h&&(i=b-i),j=!0;break;case"alternate-reverse":h||(i=b-i),j=!0}switch(d){case"both":case"forwards":if(j||g!==c||c%1!=0)break;i=b-i;break;default:if(g!==c||c%1!=0)break;i=0}this.setIterationTime(i)}},{key:"caculateTimingFunction",value:function(a){var b=this.duration,c=this.timingFunction,d=a,e=void 0;if((0,k.isObject)(c)){var f=c.length,g=this.options.nowTimingFunction;if(g&&(g.end<d||d<g.start)||f>0&&!g){g=0,this.options.nowTimingFunction=0;for(var h=0;h<f;++h)if(c[h].start<=d&&d<=c[h].end){g=c[h],this.options.nowTimingFunction=g;break}}if(g){var i=g.start;b<g.end&&(g.end=b),b=g.end-i,e=0===b?0:(d-i)/b,d=i+g.curve(e)*b}}else e=0===b?0:d/b,d=this.timingFunction(e)*b;return d}},{key:"setIterationTime",value:function(a){var b=a;return this.timingFunction&&(b=this.caculateTimingFunction(b)),this._currentIterationTime=b,this.trigger("iterationtimeupdate",[b]),this}},{key:"tick",value:function(a){var b=this,c=this._prevTime,d=this.currentTime+Math.min(1e3,a-c)/1e3*this.playSpeed;this._prevTime=a,this.setTime(d),this.ended&&this.stop(),"paused"!==this.playState&&m(function(a){b.tick(a)})}},{key:"timingFunction",set:function(a){this.options.timingFunction="function"==typeof a?a:(0,j.cubicBezier)(a)}},{key:"timingFunctions",set:function(a){for(var b=a.length,c=[],d=void 0,e=void 0,f=void 0,g=0;g<b/3;++g)d=a[3*g+0],e=a[3*g+1],f=a[3*g+2],"function"!=typeof f&&(f=(0,j.cubicBezier)(f)),c.push({start:d,end:e,curve:f});this.options.timingFunction=c}},{key:"currentTime",set:function(a){this.setTime(a)}},{key:"totalDuration",get:function(){return"infinite"===this.iterationCount?1/0:this.delay+this.activeDuration}},{key:"activeDuration",get:function(){return this.duration*this.iterationCount}},{key:"ended",get:function(){return 0===this.currentTime&&"paused"===this.playState||!(this.currentTime<this.totalDuration)}},{key:"paused",get:function(){return"paused"===this.playState}},{key:"next",set:function(a){this.on("ended",function(){a.play()})}}]),b}(i.default);(0,k.defineGetter)({target:n.prototype,name:"currentIterationTime",prefix:"_"}),(0,k.defineGetter)({target:n.prototype,name:"currentTime",prefix:"_"}),(0,k.defineGetter)({target:n.prototype,name:"timingFunction",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"playSpeed",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"playState",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"iterationCount",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"duration",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"fillMode",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"direction",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"delay",parent:"options"}),b.default=n},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){d(this,a),this._events={}}return e(a,[{key:"on",value:function(a,b){var c=this._events,d=void 0,e=void 0;if((0,f.isObject)(a)){for(d in a)this.on(d,a[d]);return this}if((0,f.has)(c,a)||(c[a]=[]),(0,f.isObject)(b)){for(e in b)this.on(a,b[e]);return this}return c[a].push(b),this}},{key:"trigger",value:function(a,b){var c=this,d=this._events;return(0,f.has)(d,a)?(d[a].forEach(function(a){a.apply(c,b)}),this):this}}]),a}();g.defaultEvents={},b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=c(1),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=c(0),l=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.scenes={},c.addScene(a),c}return f(b,a),g(b,[{key:"setIterationTime",value:function(a){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setIterationTime",this).call(this,a);var c=this.currentIterationTime,d=this.scenes,e=void 0,f=void 0,g=void 0,i=void 0,j=void 0;for(f in d)for(g=d[f],f=parseFloat(f),j=g.length,i=j-1;i>=0;--i)e=g[i],e.currentTime=c*e.playSpeed-f;return this}},{key:"addScene",value:function(a,b){var c=this.scenes;if((0,k.isObject)(a)){for(var d in a)this.addScene(d,a[d]);return this}return(0,k.has)(c,a)||(c[a]=[]),c[a].push(b),this}},{key:"duration",get:function(){var a=this.scenes,b=void 0,c=void 0,d=0,e=void 0,f=void 0,g=void 0;for(e in a)for(b=a[e],e=parseFloat(e),g=b.length,f=g-1;f>=0;--f)c=b[f],d=Math.max(d,e+c.totalDuration/c.playSpeed);return d}}]),b}(j.default);b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=b.cubicBezier=function(a){function b(a,b,c){var d=1-c;return c*c*c+3*c*c*d*b+3*c*d*d*a}function c(a){for(var c=a,d=a,f=1;Math.abs(f)>.001;){if(d=b(e,h,c),f=d-a,Math.abs(f)<.001)return c;c-=f/2}return c}var d=f(a,4),e=d[0],g=d[1],h=d[2],i=d[3];return function(a){var d=a;return d>=1?d=1:d<=0&&(d=0),d=c(d),b(g,i,d)}},h=function(){function a(b){d(this,a),this._curve=g(b[0],b[1],b[2],b[3])}return e(a,[{key:"curve",value:function(a){return this._curve(a)}}]),a}();b.default=h}])}),Scenario.hasOwnProperty("default")){var a=Scenario,b=window.Scenario=a.default;for(var c in a)"default"!==c&&(b[c]=a[c])}}();