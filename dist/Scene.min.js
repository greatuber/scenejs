!function(){if(function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("Scene",[],b):"object"==typeof exports?exports.Scene=b():a.Scene=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=13)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e={get:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=c+b;return a?function(){return this[a][d]}:function(){return this[d]}},set:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=c+b;return a?function(b){return this[a][d]=b,this}:function(a){return this[d]=a,this}}},f=(b.isUndefined=function(a){return void 0===a},b.isObject=function(a){return"object"===(void 0===a?"undefined":d(a))},b.isString=function(a){return"string"==typeof a},b.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.splitUnit=function(a){var b=""+a;try{var c=b.match(/([0-9]|\.|-|e-|e\+)+/g,"")[0],d=b.replace(c,"")||"";return c=parseFloat(c),{unit:d,value:c}}catch(a){return{unit:b}}},b.camelize=function(a){return a.replace(/[\s-_]([a-z])/g,function(a,b){return b.toUpperCase()})},b.defineProperty=function(a,b,c){Object.defineProperty(a,b,c)});b.defineGetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{get:e.get(d,c,g)})},b.defineSetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{set:e.set(d,c,g)})},b.defineGetterSetter=function(a){var b=a.target,c=a.name,d=a.parent,g=a.prefix;f(b,c,{get:e.get(d,c,g),set:e.set(d,c,g)})}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";d(this,a),this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",this.init(b,c)}return e(a,[{key:"init",value:function(a,b){var c=void 0;if((0,f.isObject)(b))for(c in b)this[c]=b[c];else this.separator=b;(0,f.isString)(a)?this.value=a.split(this.separator):(0,f.isObject)(a)?this.value=a:this.value=[a]}},{key:"get",value:function(a){return this.value[a]}},{key:"set",value:function(a,b){return this.value[a]=b,this}},{key:"clone",value:function(){var b=[],c=this.value,d="",e=void 0;for(e in c)d=c[e],b.push(d instanceof a?d.clone():d);return new a(b,{separator:this.separator,prefix:this.prefix,suffix:this.suffix,model:this.model,type:this.type})}},{key:"toValue",value:function(){return this.prefix+this.join()+this.suffix}},{key:"join",value:function(){var b=[],c=this.value,d=this.separator,e="",f=void 0;for(f in c)e=c[f],b.push(e instanceof a?e.toValue():e);return b.join(d)}},{key:"each",value:function(a){var b=this.value,c=void 0;for(c in b)a(b[c],c,b)}},{key:"length",get:function(){var a=this.value;if((0,f.has)(a,"length"))return a.length;var b=0,c=void 0;for(c in a)(0,f.has)(a,c)&&++b;return b}}]),a}();b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EASE_IN_OUT=b.EASE_OUT=b.EASE_IN=b.EASE=b.PLAY_DIRECTION=b.FILL_MODE=b.ANIMATION_PLAY_STATE=b.SCENE_ROLES=void 0;var d=c(9);b.SCENE_ROLES={},b.ANIMATION_PLAY_STATE=["idle","pending","paused","running","finished"],b.FILL_MODE=["none","forwards","backwards","both","auto"],b.PLAY_DIRECTION=["normal","reverse","alternate","alternate-reverse"],b.EASE=(0,d.cubicBezier)([.25,.1,.25,1]),b.EASE_IN=(0,d.cubicBezier)([.42,0,1,1]),b.EASE_OUT=(0,d.cubicBezier)([0,0,.58,1]),b.EASE_IN_OUT=(0,d.cubicBezier)([.42,0,.58,1])},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(2),g=c(0),h=c(4),i=c(1),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=function(){function a(b){d(this,a);var c=void 0;this.properties={},this.updateNumber=0;for(c in f.SCENE_ROLES)this.properties[c]={};this.load(b)}return e(a,null,[{key:"addRole",value:function(a){var b=this.prototype,c=(0,g.camelize)(" "+a);b["set"+c]=function(b,c){this.set(a,b,c)},b["get"+c]=function(b){return this.get(a,b)},b["remove"+c]=function(b){return this.remove(a,b),this},f.SCENE_ROLES[a]=!0}}]),e(a,[{key:"load",value:function(a){if(a&&!(0,g.isObject)(a))return this;var b=void 0,c=void 0;for(c in a)b=a[c],(0,g.has)(f.SCENE_ROLES,c)?this.set(c,b):this._set("property",c,b);return this}},{key:"get",value:function(a,b){return this.properties[a][b]}},{key:"remove",value:function(a,b){delete this.properties[a][b]}},{key:"_set",value:function(a,b,c){var d=c;++this.updateNumber,(0,g.isString)(d)&&(d=(0,h.toPropertyObject)(d)),this.properties[a][b]=d}},{key:"set",value:function(a,b,c){var d=void 0,e=c;if((0,g.isObject)(a))return this.load(a),this;if((0,g.isObject)(b)){for(d in b)this._set(a,d,b[d]);return this}if((0,g.isString)(b)&&(0,g.isUndefined)(c)){if(e=(0,h.splitSpace)(b),!(0,g.isObject)(e))return this;for(var f=e.length,i=void 0,k=0;k<f;++k)i=(0,h.toPropertyObject)(e[k]),(0,g.isObject)(i)&&i.model&&(1!==i.length?this._set(a,i.model,new j.default(i.value,{separator:i.separator})):this._set(a,i.model,i.value[0]));return this}return this._set(a,b,e),this}},{key:"has",value:function(a,b){return(0,g.has)(this.properties[a],b)}},{key:"clone",value:function(){var b=new a;return b.merge(this),b}},{key:"merge",value:function(a){var b=this.properties,c=a.properties;if(!c)return this;var d=void 0,e=void 0,f=void 0,h=void 0;for(h in b)if((0,g.has)(c,h)){d=c[h];for(e in d)f=d[e],f instanceof j.default&&(f=f.clone()),this.set(h,e,f)}return this}},{key:"format",value:function(a,b,c){var d=this.properties[a],e=[],f=void 0,g=void 0;for(g in d)f=d[g],f instanceof j.default&&(f=f.toValue()),f=b.replace(/\$1/g,g).replace(/\$2/g,f),e.push(f);return e.join(c)}}]),a}();b.default=k},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.stringToColorObject=b.toPropertyObject=b.toBracketObject=b.toColorObject=b.arrayToColorObject=b.splitComma=b.splitSpace=void 0;var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(16),g=c(0),h=void 0,i=void 0,j=b.splitSpace=function(a){for(var b=a.split(/("[^"]*"|'[^']*'|[^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\s+/g),c=b.length,d=[],e=void 0,f=void 0,h=0,i=0;i<c;++i)e=b[i],(0,g.isUndefined)(e)?++h:e&&(f=d[h],d[h]=f?f+e:e);return d},k=b.splitComma=function(a){for(var b=a.split(/("[^"]*"|'[^']*'|[^,\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^,\s()]*)|\s*,\s*/g),c=b.length,d=[],e=void 0,f=void 0,h=0,i=0;i<c;++i)e=b[i],(0,g.isUndefined)(e)?++h:e&&(f=d[h],d[h]=f?f+e:e);return d},l=b.arrayToColorObject=function(a){return a instanceof e.default?(a.type="color",a.model="rgba",a.prefix="rgba(",a):(3===a.length&&(a[3]=1),new e.default(a,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"}))},m=b.toColorObject=function(a){var b=void 0;if(a instanceof e.default)b=a;else{if(!(0,g.isObject)(a))return(0,g.isString)(a)?i(a):a;b=l(a)}var c=b.value,d=c.length;4===d?c[3]=parseFloat(c[3]):3===d&&(c[3]=1),b.type="color";var h=b.model.toLowerCase(),j=void 0;switch("rgb"===h&&l(b),h){case"rgb":case"rgba":for(j=0;j<3;++j)c[j]=parseInt(c[j],10);break;case"hsl":case"hsla":for(j=1;j<3;++j)c[j].indexOf("%")!==-1&&(c[j]=parseFloat(c[j])/100);return c=(0,f.hslToRGB)(c),l(c)}return b},n=b.toBracketObject=function(a){var b=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(a);if(!b||b.length<4)return a;var c=b[1]||"",d=c+"(",f=b[2],g=")"+b[3],i=k(f),j=i.length,l=void 0,m=",";return 1===j&&(l=h(f),l.prefix||l.suffix||(m=l.separator,l=l.value)),l||(l=i.map(function(a){return h(a)})),new e.default(l,{separator:m,model:c,prefix:d,suffix:g})};b.stringToColorObject=i=function(a){var b=0,c=0;if("#"===a.charAt(0))return b=4===a.length?(0,f.hexToRGB)((0,f.hex3to6)(a)):(a.length,(0,f.hexToRGB)(a)),l(b);if(a.indexOf("(")===-1)throw new Error("Invalid Format : Not a Color - "+a);return c=n(a),m(c)},b.toPropertyObject=h=function(a){if(!(0,g.isString)(a))return a;var b=k(a),c=void 0;if(b.length>1)return c=new e.default(b.map(function(a){return h(a)}),","),c.type="array",c;if(b=j(a),b.length>1)return c=new e.default(b.map(function(a){return h(a)})," "),c.type="array",c;if((c=a.charAt(0))&&('"'===c||"'"===c))return a;if(a.indexOf("(")!==-1){if(c=n(a),!(0,g.isObject)(c))return c;var d=c.model.toLowerCase();if(f.COLOR_MODELS.indexOf(d)!==-1)return m(c);for(var i=c.length,l=0;l<i;++l)c.set(l,h(c.get(l)));return c}return 0===a.indexOf("#")?m(a):a},b.toPropertyObject=h,b.stringToColorObject=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(3),j=d(i),k=c(1),l=d(k),m=function(a,b,c){a[b]=c,a["-moz-"+b]=c,a["-ms-"+b]=c,a["-o-"+b]=c,a["-webkit-"+b]=c},n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"cssText",get:function(){var a={},b=[],c=this.properties.property,d=void 0,e=void 0;for(d in c)e=c[d],e instanceof l.default&&(e=e.toValue()),a[d]=e;var f=this.format("transform","$1($2)"," "),g=this.format("filter","$1($2)"," ");f&&m(a,"transform",f),g&&m(a,"filter",g);for(d in a)b.push(d+":"+a[d]+";");return b.join("")}}]),b}(j.default);b.default=n},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(14),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=c(9),k=c(0),l=0,m=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){var b=Date.now(),c=Math.max(0,16-(b-l)),d=window.setTimeout(function(){a(b+c)},1e3/60);return l=b+c,d}}(),n=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._currentTime=0,c._timer=0,c.options={},c.iterationCount=1,c.delay=0,c.fillMode="forwards",c.direction="none",c.playState="paused",c.playSpeed=1,c._currentTime=0,c._currentIterationTime=-1,c._prevTime=0,c.setOptions(a),c}return f(b,a),g(b,[{key:"setOptions",value:function(a){if(!a)return this;var b=void 0;for(b in a)"timingFunction"!==b&&"timingFunctions"!==b?this.options[b]=a[b]:this[b]=a[b];return this}},{key:"play",value:function(){var a=this;return this.ended&&(this.currentTime=0),this.playState="running",m(function(b){a._prevTime=b,a.tick(b)}),this.trigger("play"),this}},{key:"pause",value:function(){return this.playState="paused",this.trigger("paused"),this}},{key:"stop",value:function(){return this.playState="paused",this.trigger("paused"),this.trigger("ended"),this}},{key:"reset",value:function(){return this.currentTime=0,this.stop(),this}},{key:"setTime",value:function(a){var b=this.totalDuration,c=a;c<0?c=0:c>b&&(c=b),this._currentTime=c,this.calculateIterationTime(),this.trigger("timeupdate",[c])}},{key:"calculateIterationTime",value:function(){var a=this._currentTime,b=this.duration,c=this.iterationCount,d=this.fillMode,e=this.direction,f=parseInt(1e4*Math.max(a-this.delay,0),10)/1e4,g=0===b?0:f/b,h=g%2>=1,i=f%b,j=!1;switch(e){case"reverse":i=b-i;break;case"alternate":h&&(i=b-i),j=!0;break;case"alternate-reverse":h||(i=b-i),j=!0}switch(d){case"both":case"forwards":if(j||g!==c||c%1!=0)break;i=b-i;break;default:if(g!==c||c%1!=0)break;i=0}this.setIterationTime(i)}},{key:"caculateTimingFunction",value:function(a){var b=this.duration,c=this.timingFunction,d=a,e=void 0;if((0,k.isObject)(c)){var f=c.length,g=this.options.nowTimingFunction;if(g&&(g.end<d||d<g.start)||f>0&&!g){g=0,this.options.nowTimingFunction=0;for(var h=0;h<f;++h)if(c[h].start<=d&&d<=c[h].end){g=c[h],this.options.nowTimingFunction=g;break}}if(g){var i=g.start;b<g.end&&(g.end=b),b=g.end-i,e=0===b?0:(d-i)/b,d=i+g.curve(e)*b}}else e=0===b?0:d/b,d=this.timingFunction(e)*b;return d}},{key:"setIterationTime",value:function(a){var b=a;return this.timingFunction&&(b=this.caculateTimingFunction(b)),this._currentIterationTime=b,this.trigger("iterationtimeupdate",[b]),this}},{key:"tick",value:function(a){var b=this,c=this._prevTime,d=this.currentTime+Math.min(1e3,a-c)/1e3*this.playSpeed;this._prevTime=a,this.setTime(d),this.ended&&this.stop(),"paused"!==this.playState&&m(function(a){b.tick(a)})}},{key:"timingFunction",set:function(a){this.options.timingFunction="function"==typeof a?a:(0,j.cubicBezier)(a)}},{key:"timingFunctions",set:function(a){for(var b=a.length,c=[],d=void 0,e=void 0,f=void 0,g=0;g<b/3;++g)d=a[3*g+0],e=a[3*g+1],f=a[3*g+2],"function"!=typeof f&&(f=(0,j.cubicBezier)(f)),c.push({start:d,end:e,curve:f});this.options.timingFunction=c}},{key:"currentTime",set:function(a){this.setTime(a)}},{key:"totalDuration",get:function(){return"infinite"===this.iterationCount?1/0:this.delay+this.activeDuration}},{key:"activeDuration",get:function(){return this.duration*this.iterationCount}},{key:"ended",get:function(){return 0===this.currentTime&&"paused"===this.playState||!(this.currentTime<this.totalDuration)}},{key:"paused",get:function(){return"paused"===this.playState}},{key:"next",set:function(a){this.on("ended",function(){a.play()})}}]),b}(i.default);(0,k.defineGetter)({target:n.prototype,name:"currentIterationTime",prefix:"_"}),(0,k.defineGetter)({target:n.prototype,name:"currentTime",prefix:"_"}),(0,k.defineGetter)({target:n.prototype,name:"timingFunction",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"playSpeed",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"playState",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"iterationCount",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"duration",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"fillMode",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"direction",parent:"options"}),(0,k.defineGetterSetter)({target:n.prototype,name:"delay",parent:"options"}),b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(6),k=d(j),l=c(3),m=d(l),n=c(0),o=c(15),p=d(o),q=c(10),r=c(2),s=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.timeline=new p.default,c.load(a),c}return g(b,a),i(b,null,[{key:"addGetterSetter",value:function(a){this.prototype[(0,n.camelize)("set "+a)]=function(b,c,d){return this.set(b,a,c,d),this},this.prototype[(0,n.camelize)("get "+a)]=function(b,c){var d=this.getFrame(b);return d?d.get(a,c):0}}},{key:"addRole",value:function(a){m.default.addRole(a),this.addGetterSetter(a)}}]),i(b,[{key:"setId",value:function(a){this.options.id=a}},{key:"set",value:function(a,b,c,d){if((0,n.isObject)(a))return this.load(a),this;var e=this.getFrame(a);return e||(e=this.newFrame(a)),e.set(b,c,d),this.updateFrame(a,e),this}},{key:"setIterationTime",value:function(a){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setIterationTime",this).call(this,a);var c=this.currentIterationTime;return this.getNowFrame(c)?(this.trigger("animate",[c,this.getNowFrame(c),this.currentTime]),this):this}},{key:"update",value:function(){return this.timeline.update(),this}},{key:"updateFrame",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFrame(a);return this.timeline.updateFrame(a,b),this}},{key:"newFrame",value:function(a){var b=this.getFrame(a);return b?b:(b=new m.default,(0,n.isUndefined)(a)||this.setFrame(a,b),b)}},{key:"setFrame",value:function(a,b){return this.timeline.add(a,b),this}},{key:"getFrame",value:function(a){return this.timeline.get(a)}},{key:"hasFrame",value:function(a){return this.timeline.has(a)}},{key:"removeFrame",value:function(a){return this.timeline.remove(a),delete this.frames[a],this}},{key:"copyFrame",value:function a(b,c){var d=void 0;if((0,n.isObject)(b)){for(d in b)this.copyFrame(d,b[d]);return this}var e=this.getFrame(b);if(!e)return this;var a=e.clone();return this.setFrame(c,a),this}},{key:"mergeFrame",value:function(a,b){var c=void 0;if((0,n.isObject)(a)){for(c in a)this.mergeFrame(c,a[c]);return this}var d=this.getFrame(a);return d?(this.newFrame(b).merge(d),this):this}},{key:"getNowValue",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.timeline.length,f=this.timeline,g=f.times,h=g.length,i=void 0,j=void 0,k=void 0,l=g[d],m=g[e];if(!(c<l)){for(k=d;k>=0&&(l=g[k],i=f.get(l),!i.has(a,b));--k);for(k=e;k<h&&(m=g[k],j=f.get(m),!j.has(a,b));++k);var o=i.get(a,b);if(!(0,n.isUndefined)(o)){if(!j)return o;var p=j.get(a,b);if((0,n.isUndefined)(p))return o;l<0&&(l=0);return(0,q.dot)(o,p,c-l,m-c)}}}},{key:"getLeftRightIndex",value:function(a){var b=this.timeline,c=b.times,d=b.last,e=b.length;if(0!==e){var f=parseInt(d>0?a*e/d:0,10),g=e-1,h=0;if(f<0?f=0:f>g&&(f=g),a<c[g])for(;h<g&&(h!==f&&g!==f||h+1!==g);){if(c[f]>a)g=f;else{if(!(c[f]<a)){g=f,h=g;break}h=f}f=parseInt((h+g)/2,10)}else f=g,h=f;return{left:h,right:g}}}},{key:"getNowFrame",value:function(a){this.update();var b=this.getLeftRightIndex(a);if(!b)return b;var c=b.left,d=b.right,e=this.newFrame(),f=this.timeline.names,g=void 0,h=void 0,i=void 0,j=void 0;for(g in r.SCENE_ROLES){h=f[g];for(i in h)j=this.getNowValue(g,i,a,c,d),(0,n.isUndefined)(j)||e.set(g,i,j)}return e}},{key:"load",value:function(a){if(!(0,n.isObject)(a))return this;var b=!1,c=void 0,d=void 0;for(c in a)"options"!==c?(d=a[c],"number"!=typeof d?this.set(c,a[c]):this.mergeFrame(d,c)):b=!0;return b&&this.setOptions(a.options),this}},{key:"duration",get:function(){return this.timeline.last}},{key:"id",set:function(a){this.setId(a)}}]),b}(k.default);(0,n.defineGetter)({target:s.prototype,name:"id",parent:"options"}),s.addRole("property"),b.default=s},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){d(this,a),this.times=[],this.item={}}return e(a,[{key:"add",value:function(a,b){return this.item[a]=b,this.addTime(a),this}},{key:"addTime",value:function(a){var b=this.times,c=b.length,d=c,e=void 0;for(e=0;e<c;++e){if(a===b[e])return this;if(a<b[e]){d=e;break}}return this.times.splice(d,0,a),this}},{key:"has",value:function(a){return(0,f.has)(this.item,a)}},{key:"get",value:function(a){return this.item[a]}},{key:"remove",value:function(a){return delete this.item[a],this.removeTime(a),this}},{key:"removeTime",value:function(a){var b=this.times.indexOf(a);return b===-1?this:(this.times.splice(b,1),this)}},{key:"last",get:function(){var a=this.times;return 0===a.length?0:a[a.length-1]}},{key:"length",get:function(){return this.times.length}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=b.cubicBezier=function(a){function b(a,b,c){var d=1-c;return c*c*c+3*c*c*d*b+3*c*d*d*a}function c(a){for(var c=a,d=a,f=1;Math.abs(f)>.001;){if(d=b(e,h,c),f=d-a,Math.abs(f)<.001)return c;c-=f/2}return c}var d=f(a,4),e=d[0],g=d[1],h=d[2],i=d[3];return function(a){var d=a;return d>=1?d=1:d<=0&&(d=0),d=c(d),b(g,i,d)}},h=function(){function a(b){d(this,a),this._curve=g(b[0],b[1],b[2],b[3])}return e(a,[{key:"curve",value:function(a){return this._curve(a)}}]),a}();b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.dot=b.dotObject=b.dotColor=b.dotArray=void 0;var d=c(0),e=c(1),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=c(4),h=void 0,i=b.dotArray=function(a,b,c,d){var e=[],f=void 0,g=void 0;for(g in a)f=a[g],e[g]=g in b?h(f,b[g],c,d):f;return e},j=b.dotColor=function(a,b,c,d){var e=a,j=b;e instanceof f.default||(e=(0,g.toColorObject)(e)),j instanceof f.default||(j=(0,g.toColorObject)(j));var k=e.value,l=j.value,m=e.model;if(m!==j.model)return h(e.toValue(),j.toValue(),c,d);3===k.length&&(k[3]=1),3===l.length&&(l[3]=1);for(var n=i(k,l,c,d),o=m,p=0;p<3;++p)n[p]=parseInt(n[p],10);return new f.default(n,{type:"color",model:o,prefix:o+"(",suffix:")"})},k=b.dotObject=function(a,b,c,e){if("color"===a.type)return j(a,b,c,e);var g=a.value,h=b.value;if(!(0,d.isObject)(b))return a;var k=i(g,h,c,e),l=new f.default(k,a.separator);return l.prefix=a.prefix,l.suffix=a.suffix,l};b.dot=h=function(a,b,c,e){if(a instanceof f.default)return k(a,b,c,e);if(c+e===0)return a;var g=(0,d.splitUnit)(a),h=(0,d.splitUnit)(b),i=c/(c+e),j=1-i,l=void 0;if(isNaN(g.value)||isNaN(h.value))return i>=1?b:a;l=g.value*j+h.value*i;var m=g.unit||h.unit||!1;return m===!1?l:l+m.trim()},b.dot=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){var c=this.element;if(c){var d=b.cssText;if(this.options.cssText!==d)if(this.options.cssText=d,c instanceof NodeList){var e=c.length,f=void 0;for(f=0;f<e;++f)c[f].style.cssText=d}else c.style.cssText=d}}Object.defineProperty(b,"__esModule",{value:!0});var i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(7),l=d(k),m=c(0),n=c(5),o=d(n),p=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.on("animate",h),c}return g(b,a),j(b,null,[{key:"addRole",value:function(a){o.default.addRole(a),this.addGetterSetter(a)}}]),j(b,[{key:"newFrame",value:function(a){var b=this.getFrame(a);return b?b:(b=new o.default,(0,m.isUndefined)(a)||this.setFrame(a,b),b)}},{key:"setId",value:function(a){var b=this.element;if(this.options.id=a,!b)return this;if(b instanceof NodeList){var c=b.length,d=void 0;for(d=0;d<c;++d)b[d].setAttribute("data-scene-id",a)}else b.setAttribute("data-scene-id",a);return this}},{key:"setSelector",value:function(a){var b=a;return b||(b=this.id),this.options.selector=b,this.element=document.querySelectorAll(b),this}},{key:"setElement",value:function(a){var b=a;if(b instanceof NodeList&&(b=b[0]),!b)return this;var c=this.id;if(this.options.element=a,!c||"null"===c)for(;c=parseInt(1e4*Math.random(),10),document.querySelector('[data-scene-id="'+c+'"]'););return this.id=c,this}},{key:"copyCSSStyle",value:function(a){var b=this.element;if(b instanceof NodeList&&(b=b[0]),!b)return this;var c=b.style.cssText,d=c.split(";"),e=d.length,f={},g=void 0,h=void 0;for(g=0;g<e;++g)!(h=/([^:]*):([\S\s]*)/g.exec(d[g]))||h.length<3||(f[h[1]]=h[2]);return this.set(a,f),this}},{key:"copyCSSProperty",value:function(a,b){var c=this.element;if(c instanceof NodeList&&(c=c[0]),!c)return this;var d=c.style,e={};if((0,m.isObject)(b))for(var f=void 0,g=0,h=b.length;g<h;++g)f=b[g],e[b]=d&&d[f]||window.getComputedStyle(c)[f];else e[b]=d&&d[b]||window.getComputedStyle(c)[b];return this.set(a,e),this}},{key:"setOptions",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setOptions",this).call(this,a);var c=a&&a.selector;return c?(c===!0?this.setSelector():this.setSelector(c),this):this}},{key:"selector",get:function(){return this.options.selector},set:function(a){this.setSelector(a)}},{key:"element",set:function(a){this.setElement(a)}}]),b}(l.default);p.addRole("transform"),p.addRole("filter"),(0,m.defineGetter)({target:p.prototype,name:"element",parent:"options"}),b.default=p},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(6),l=e(k),m=c(7),n=e(m),o=c(3),p=e(o),q=c(8),r=e(q),s=c(2),t=d(s),u=c(0),v=d(u),w=c(10),x=d(w),y=c(4),z=d(y),A=c(1),B=e(A),C=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.items={},c.load(a),c}return h(b,a),j(b,null,[{key:"addRole",value:function(a){n.default.addRole(a)}}]),j(b,[{key:"getItem",value:function(a){return this.items[a]}},{key:"newItem",value:function(a){if(v.has(this.items,a))return this.items[a];var b=new n.default;return this.setItem(a,b),b}},{key:"setItem",value:function(a,b){return b.id=a,this.items[a]=b,this}},{key:"setIterationTime",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setIterationTime",this).call(this,a);var c=this.currentIterationTime,d=this.items,e=void 0,f=void 0;for(f in d)e=d[f],e.currentTime=c*e.playSpeed;return this}},{key:"load",value:function(a){if(!v.isObject(a))return this;var b=void 0,c=void 0,d=void 0;for(d in a)"options"!==d?(b=this.newItem(d),b.load(a[d])):c=!0;return c&&this.setOptions(a.options),this}},{key:"duration",get:function(){var a=this.items,b=void 0,c=0,d=void 0;for(d in a)b=a[d],c=Math.max(c,b.totalDuration/b.playSpeed);return c}}]),b}(l.default);C.Util=v,C.Frame=p.default,C.SceneItem=n.default,C.Dot=x,C.Constant=t,C.Property=z,C.PropertyObject=B.default,C.Timeline=r.default,C.Animator=l.default,b.default=C},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){
if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(11),m=d(l),n=c(5),o=d(n),p=c(0),q=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"newItem",value:function(a){if((0,p.has)(this.items,a))return this.items[a];var b=new m.default;return this.setItem(a,b),b}},{key:"setSelector",value:function(a,b){var c=void 0,d=void 0,e=b;if("string"==typeof a)return(c=this.getItem(e))?(c.setSelector(a),this):this;for(d in a)e=a[d],(c=this.getItem(e))&&(c.selector=d);return this}},{key:"load",value:function(a){if(i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"load",this).call(this,a),!(a&&a.options&&a.options.selector))return this;var c=void 0,d=void 0;for(c in a)"options"!==c&&(d=this.getItem(c))&&d.setSelector(c);return this}}]),b}(k.default);q.SceneItem=m.default,q.Frame=o.default,b.default=q},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){d(this,a),this._events={}}return e(a,[{key:"on",value:function(a,b){var c=this._events,d=void 0,e=void 0;if((0,f.isObject)(a)){for(d in a)this.on(d,a[d]);return this}if((0,f.has)(c,a)||(c[a]=[]),(0,f.isObject)(b)){for(e in b)this.on(a,b[e]);return this}return c[a].push(b),this}},{key:"trigger",value:function(a,b){var c=this,d=this._events;return(0,f.has)(d,a)?(d[a].forEach(function(a){a.apply(c,b)}),this):this}}]),a}();g.defaultEvents={},b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=c(8),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=c(2),l=c(0),m=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.updateNumber={},a.names={};var c=a.names;for(var f in k.SCENE_ROLES)c[f]={};return a}return f(b,a),g(b,[{key:"addTime",value:function(a){return h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"addTime",this).call(this,a),(0,l.has)(this.updateNumber,a)?this:(this.updateNumber[a]=0,this)}},{key:"removeTime",value:function(a){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"removeTime",this).call(this,a),delete this.updateNumber[a]}},{key:"update",value:function(){var a=this.updateNumber,b=void 0,c=void 0;for(c in a)b=this.get(c),a[c]!==b.updateNumber&&this.updateFrame(c,b);return this}},{key:"updateFrame",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.get(a);if(!b)return this;var c=b.properties,d=this.names,e=void 0,f=void 0,g=void 0;for(var h in c){e=c[h],f=d[h];for(g in e)(0,l.has)(f,g)||(f[g]=!0)}return this.updateNumber[a]=b.updateNumber,this}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=(b.COLOR_MODELS=["rgb","rgba","hsl","hsla"],b.cutHex=function(a){return"#"===a.charAt(0)?a.substring(1,9):a});b.hexToRGB=function(a){var b=d(a),c=parseInt(b.substring(0,2),16),e=parseInt(b.substring(2,4),16),f=parseInt(b.substring(4,6),16),g=parseInt(b.substring(6,8),16)/255;return isNaN(g)&&(g=1),[c,e,f,g]},b.hex3to6=function(a){var b=a.charAt(1),c=a.charAt(2),d=a.charAt(3);return["#",b,b,c,c,d,d].join("")},b.hslToRGB=function(a){var b=a[0],c=a[1],d=a[2];b<0&&(b+=360*parseInt((Math.abs(b)+360)/360,10)),b%=360;var e=(1-Math.abs(2*d-1))*c,f=e*(1-Math.abs(b/60%2-1)),g=d-e/2,h=void 0;b<60?h=[e,f,0]:b<120?h=[f,e,0]:b<180?h=[0,e,f]:b<240?h=[0,f,e]:b<300?h=[f,0,e]:b<360&&(h=[e,0,f]);var i=[Math.round(255*(h[0]+g)),Math.round(255*(h[1]+g)),Math.round(255*(h[2]+g))];return a.length>3&&(i[3]=a[3]),i}}])}),Scene.hasOwnProperty("default")){var a=Scene,b=window.Scene=a.default;for(var c in a)"default"!==c&&(b[c]=a[c])}}();