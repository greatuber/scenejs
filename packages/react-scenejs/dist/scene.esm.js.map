{"version":3,"file":"scene.esm.js","sources":["../src/react-scenejs/SceneInterface.tsx","../src/react-scenejs/SceneItem.tsx","../src/react-scenejs/Scene.tsx"],"sourcesContent":["import { PureComponent } from \"react\";\nimport Scene, { OPTIONS, EVENTS, SceneItem, AnimatorState } from \"scenejs\";\nimport { IObject } from \"@daybrush/utils\";\nimport { ScenePropTypes } from \"./types\";\n\nexport class SceneInterface<T extends Scene | SceneItem> extends PureComponent<ScenePropTypes, {}> {\n  public static defaultProps: ScenePropTypes = {\n    duration: 0,\n    fillMode: \"forwards\",\n    direction: \"normal\",\n    playSpeed: 1,\n    iterationCount: 1,\n    delay: 0,\n    easing: 0,\n    time: -1,\n    css: false,\n    autoplay: false,\n    onPlay: () => undefined,\n    onPaused: () => undefined,\n    onEnded: () => undefined,\n    onTimeUpdate: () => undefined,\n    onIteration: () => undefined,\n    onAnimate: () => undefined,\n  };\n  protected item!: T;\n  protected events: IObject<any> = {\n    play: (e: any) => this.props.onPlay!(e),\n    paused: (e: any) => this.props.onPaused!(e),\n    ended: (e: any) => this.props.onEnded!(e),\n    timeupdate: (e: any) => this.props.onTimeUpdate!(e),\n    iteration: (e: any) => this.props.onIteration!(e),\n    animate: (e: any) => this.props.onAnimate!(e),\n  };\n  public render() {\n    return this.props.children;\n  }\n  public componentDidUpdate() {\n    if (this.props.time !== -1 && (this.props.autoplay === false || this.item.getPlayState() === \"paused\")) {\n      this.item.setTime(this.props.time!);\n    }\n  }\n  public componentWillUnmount() {\n    this.item.off();\n  }\n  public setTime(time: number | string) {\n    this.item.setTime(time);\n  }\n  public getTime() {\n    return this.item.getTime();\n  }\n  public play() {\n    this.props.css !== false ? this.item.playCSS() : this.item.play();\n  }\n  public pause() {\n    this.item.pause();\n  }\n  public isPaused() {\n    return this.item.isPaused();\n  }\n  public getItem() {\n    return this.item;\n  }\n  public getDuration() {\n    return this.item.getDuration();\n  }\n  protected init() {\n    const item = this.item;\n    const events = this.events;\n    const sceneOptions: Partial<AnimatorState> = {};\n\n    if (this.props.keyframes) {\n      this.item.load(this.props.keyframes);\n    }\n    OPTIONS.forEach(name => {\n      sceneOptions[name] = this.props[name] as any;\n    });\n    (item as any).setOptions(sceneOptions);\n    EVENTS.forEach(name => {\n      this.item.on(name, events[name]);\n    });\n    if (this.props.autoplay !== false) {\n      this.play();\n    } else if (this.props.time !== -1) {\n      this.setTime(this.props.time!);\n    } else {\n      this.setTime(0);\n    }\n  }\n}\n","import { SceneItem as NativeSceneItem } from 'scenejs';\nimport { findDOMNode } from 'react-dom';\nimport { SceneInterface } from './SceneInterface';\n\n\nexport class SceneItem extends SceneInterface<NativeSceneItem> {\n  protected item: NativeSceneItem = new NativeSceneItem();\n  public render() {\n    return this.props.children;\n  }\n  public componentDidMount() {\n    this.item.setElement(findDOMNode(this) as HTMLElement);\n    this.init();\n  }\n}\n","import NativeScene from \"scenejs\";\nimport { SceneInterface } from \"./SceneInterface\";\n\nexport class Scene extends SceneInterface<NativeScene> {\n  protected item: NativeScene = new NativeScene({}, { selector: true });\n  public render() {\n    return this.props.children;\n  }\n  public componentDidMount() {\n    this.init();\n  }\n}\n"],"names":["tslib_1","_this","play","e","props","onPlay","paused","onPaused","ended","onEnded","timeupdate","onTimeUpdate","iteration","onIteration","animate","onAnimate","children","time","autoplay","item","getPlayState","setTime","off","getTime","css","playCSS","pause","isPaused","getDuration","events","sceneOptions","keyframes","load","OPTIONS","forEach","name","setOptions","EVENTS","on","SceneInterface","duration","fillMode","direction","playSpeed","iterationCount","delay","easing","undefined","PureComponent","NativeSceneItem","setElement","findDOMNode","init","NativeScene","selector"],"mappings":"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"}