{"version":3,"file":"scene.esm.js","sources":["../src/preact-scenejs/SceneInterface.tsx","../src/preact-scenejs/SceneItem.tsx","../src/preact-scenejs/Scene.tsx"],"sourcesContent":["import { Component, h } from \"preact\";\nimport Scene, { OPTIONS, EVENTS, SceneItem, AnimatorState } from \"scenejs\";\nimport { IObject } from \"@daybrush/utils\";\nimport { ScenePropTypes } from \"./types\";\n\nexport class SceneInterface<T extends Scene | SceneItem> extends Component<ScenePropTypes, {}> {\n  public static defaultProps: ScenePropTypes = {\n    duration: 0,\n    fillMode: \"forwards\",\n    direction: \"normal\",\n    playSpeed: 1,\n    iterationCount: 1,\n    delay: 0,\n    easing: 0,\n    time: -1,\n    css: false,\n    autoplay: false,\n    onPlay: () => undefined,\n    onPaused: () => undefined,\n    onEnded: () => undefined,\n    onTimeUpdate: () => undefined,\n    onIteration: () => undefined,\n    onAnimate: () => undefined,\n  };\n  protected item!: T;\n  protected events: IObject<any> = {\n    play: (e: any) => this.props.onPlay!(e),\n    paused: (e: any) => this.props.onPaused!(e),\n    ended: (e: any) => this.props.onEnded!(e),\n    timeupdate: (e: any) => this.props.onTimeUpdate!(e),\n    iteration: (e: any) => this.props.onIteration!(e),\n    animate: (e: any) => this.props.onAnimate!(e),\n  };\n  public render() {\n    return ([] as any[]).concat(this.props.children!)[0];\n  }\n  public componentDidUpdate() {\n    if (this.props.time !== -1 && (this.props.autoplay === false || this.item.getPlayState() === \"paused\")) {\n      this.item.setTime(this.props.time!);\n    }\n  }\n  public componentWillUnmount() {\n    this.item.off();\n  }\n  public setTime(time: number | string) {\n    this.item.setTime(time);\n  }\n  public getTime() {\n    return this.item.getTime();\n  }\n  public play() {\n    this.props.css !== false ? this.item.playCSS() : this.item.play();\n  }\n  public pause() {\n    this.item.pause();\n  }\n  public isPaused() {\n    return this.item.isPaused();\n  }\n  public getItem() {\n    return this.item;\n  }\n  public getDuration() {\n    return this.item.getDuration();\n  }\n  protected init() {\n    const item = this.item;\n    const events = this.events;\n    const sceneOptions: Partial<AnimatorState> = {};\n\n    if (this.props.keyframes) {\n      this.item.load(this.props.keyframes);\n    }\n    OPTIONS.forEach(name => {\n      sceneOptions[name] = this.props[name] as any;\n    });\n    (item as any).setOptions(sceneOptions);\n    EVENTS.forEach(name => {\n      this.item.on(name, events[name]);\n    });\n    if (this.props.autoplay !== false) {\n      this.play();\n    } else if (this.props.time !== -1) {\n      this.setTime(this.props.time!);\n    } else {\n      this.setTime(0);\n    }\n  }\n}\n","import { SceneItem as NativeSceneItem } from \"scenejs\";\nimport { SceneInterface } from \"./SceneInterface\";\n\nexport class SceneItem extends SceneInterface<NativeSceneItem> {\n  protected item: NativeSceneItem = new NativeSceneItem();\n  public componentDidMount() {\n    this.item.setElement(this.base as HTMLElement);\n    this.init();\n  }\n}\n","import NativeScene from \"scenejs\";\nimport { SceneInterface } from \"./SceneInterface\";\n\nexport class Scene extends SceneInterface<NativeScene> {\n  protected item: NativeScene = new NativeScene({}, { selector: true });\n  public componentDidMount() {\n    this.init();\n  }\n}\n"],"names":["tslib_1","_this","play","e","props","onPlay","paused","onPaused","ended","onEnded","timeupdate","onTimeUpdate","iteration","onIteration","animate","onAnimate","concat","children","time","autoplay","item","getPlayState","setTime","off","getTime","css","playCSS","pause","isPaused","getDuration","events","sceneOptions","keyframes","load","OPTIONS","forEach","name","setOptions","EVENTS","on","SceneInterface","duration","fillMode","direction","playSpeed","iterationCount","delay","easing","undefined","Component","NativeSceneItem","setElement","base","init","NativeScene","selector"],"mappings":"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"}